# Azure AI Landing Zone Configuration
# This configuration file defines all settings for deploying an enterprise-grade AI infrastructure

# =============================================================================
# PROJECT SETTINGS
# =============================================================================
[project]
# Project prefix - used for naming all resources (keep it short, alphanumeric only)
name = "myaiproject"
# Azure regions for deployment (fallback order: left to right)
# The deployment will try each region in order until it finds one that works
# Common regions: eastus, westus2, westeurope, northeurope, southcentralus, centralus
locations = ["eastus", "westus2", "westeurope"]
# Environment (dev, staging, prod)
environment = "dev"
# Resource group name (will be created if it doesn't exist)
# Note: {location} will be replaced with the successfully deployed region
resourceGroupName = "rg-myaiproject-dev"

# =============================================================================
# ADMIN USERS
# =============================================================================
[admin]
# List of admin user emails - these users will get full control plane and data plane access
# Format: ["user1@domain.com", "user2@domain.com"]
# Note: These are resolved to Azure AD Object IDs during deployment
emails = [
    "admin1@contoso.com",
    "admin2@contoso.com"
]

# =============================================================================
# NETWORKING
# =============================================================================
[networking]
# Enable Virtual Network with private endpoints for secure networking
enabled = true
# VNet address space
vnetAddressPrefix = "10.0.0.0/16"
# Subnet for Container Apps (minimum /23 required)
containerAppsSubnetPrefix = "10.0.0.0/23"
# Subnet for private endpoints
privateEndpointSubnetPrefix = "10.0.2.0/24"
# Subnet for SQL integration
sqlSubnetPrefix = "10.0.3.0/24"

# =============================================================================
# AZURE OPENAI SERVICE
# =============================================================================
[services.openai]
enabled = true
# SKU: S0 (standard)
sku = "S0"
# Content filter policy name (default, or custom policy name)
contentFilterPolicy = "default"
# Deployments to create
deployments = [
    { name = "gpt-4", model = "gpt-4", version = "2024-05-13", capacity = 10 },
    { name = "gpt-35-turbo", model = "gpt-35-turbo", version = "0613", capacity = 10 },
    { name = "text-embedding-ada-002", model = "text-embedding-ada-002", version = "2", capacity = 10 }
]

# =============================================================================
# COSMOS DB
# =============================================================================
[services.cosmosdb]
enabled = true
# Enable NoSQL API (document database)
enableNoSQL = true
# Enable Gremlin API (graph database)
enableGremlin = true
# Consistency level: Strong, BoundedStaleness, Session, ConsistentPrefix, Eventual
consistencyLevel = "Session"
# Enable serverless mode (cost-effective for dev/test)
enableServerless = false
# Enable analytical storage for analytics workloads
enableAnalyticalStorage = false
# Additional regions for geo-replication
additionalRegions = []

# =============================================================================
# DATA LAKE STORAGE
# =============================================================================
[services.datalake]
enabled = true
# SKU: Standard_LRS, Standard_GRS, Standard_RAGRS, Standard_ZRS, Premium_LRS, Premium_ZRS
sku = "Standard_LRS"
# Enable hierarchical namespace (required for Data Lake Gen2)
isHnsEnabled = true

# =============================================================================
# SQL DATABASE
# =============================================================================
[services.sqldb]
enabled = true
# SQL Server admin username
adminUsername = "sqladmin"
# SKU: Basic, S0, S1, S2, S3, P1, P2, P4, P6, P11, P15
databaseSku = "S1"
# Enable Azure AD authentication
enableAzureADAuth = true
# Enable zone redundancy (Premium tier only)
zoneRedundant = false
# Whitelist specific IP addresses (CIDR notation)
allowedIpRanges = []

# =============================================================================
# AI SEARCH
# =============================================================================
[services.aisearch]
enabled = true
# SKU: free, basic, standard, standard2, standard3
sku = "standard"
# Number of replicas
replicaCount = 1
# Number of partitions
partitionCount = 1
# Semantic search tier: free, standard
semanticSearchTier = "free"

# =============================================================================
# CONTAINER APPS
# =============================================================================
[services.containerApps]
enabled = true
# Enable workload profiles for more control
enableWorkloadProfiles = false
# Enable Dapr for microservices
enableDapr = false
# Enable zone redundancy
zoneRedundant = false

# =============================================================================
# CONTAINER REGISTRY
# =============================================================================
[services.containerRegistry]
enabled = true
# SKU: Basic, Standard, Premium
sku = "Premium"
# Enable admin user (not recommended for production)
adminUserEnabled = false
# Geo-replication locations (Premium SKU only)
geoReplicationLocations = []

# =============================================================================
# KEY VAULT
# =============================================================================
[services.keyVault]
enabled = true
# SKU: standard, premium
sku = "standard"
# Enable RBAC authorization (recommended)
enableRbacAuthorization = true
# Enable soft delete
enableSoftDelete = true
# Soft delete retention days (7-90)
softDeleteRetentionInDays = 90

# =============================================================================
# MONITORING
# =============================================================================
[services.monitoring]
enabled = true
# Log Analytics retention in days (30-730)
retentionInDays = 30

# =============================================================================
# API MANAGEMENT (Optional)
# =============================================================================
[services.apim]
enabled = false
publisherEmail = ""
publisherName = ""
sku = "Developer"

# =============================================================================
# AZURE FRONT DOOR (Optional)
# =============================================================================
[services.frontDoor]
enabled = false
enableWaf = false

# =============================================================================
# REDIS CACHE (Optional)
# =============================================================================
[services.redis]
enabled = false
sku = "Standard"
capacity = 1

# =============================================================================
# AZURE POLICY (Optional)
# =============================================================================
[policy]
enabled = false
requiredTags = ["reason", "purpose"]
enforcementMode = "Default"

# =============================================================================
# RESOURCE TAGS
# =============================================================================
[tags]
Environment = "Development"
ManagedBy = "AzureDeveloperCLI"
Project = "AI-LandingZone"
reason = "AI Landing Zone Infrastructure"
purpose = "Enterprise AI Platform"
